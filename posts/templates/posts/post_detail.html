{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <h2 class="card-title">{{ post.title }}</h2>
                    
                    <div class="text-muted mb-3">
                        –ê–≤—Ç–æ—Ä: {{ post.author.username }} | 
                        –î–∞—Ç–∞: {{ post.created_at|date:"d.m.Y H:i" }} |
                        {% if post.community %}
                            –°–æ–æ–±—â–µ—Å—Ç–≤–æ: <a href="{% url 'communities:community_detail' post.community.name %}">r/{{ post.community.name }}</a> |
                        {% endif %}
                        –ì–æ–ª–æ—Å–æ–≤: {{ post.score }}
                    </div>
                    
                    <div class="card-text">
                        {{ post.content|linebreaks }}
                    </div>
                    
                    <div class="mt-4">
                        {% if user.is_authenticated %}
                        <div class="btn-group" role="group">
                            <form method="post" action="{% url 'vote_post' post.id 'upvote' %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-outline-success">
                                    üëç Upvote ({{ post.upvotes.count }})
                                </button>
                            </form>
                            <form method="post" action="{% url 'vote_post' post.id 'downvote' %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-outline-danger">
                                    üëé Downvote ({{ post.downvotes.count }})
                                </button>
                            </form>
                            <form method="post" action="{% url 'vote_post' post.id 'remove' %}">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-outline-secondary">
                                    ‚ùå Remove vote
                                </button>
                            </form>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- –ë–ª–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ -->
            <div class="card mt-4">
                <div class="card-body">
                    <h5>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h5>
                    <p class="text-muted">–°–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ</p>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">–û –ø–æ—Å—Ç–µ</h5>
                    <p><strong>–ê–≤—Ç–æ—Ä:</strong> {{ post.author.username }}</p>
                    <p><strong>–°–æ–∑–¥–∞–Ω:</strong> {{ post.created_at|date:"d.m.Y H:i" }}</p>
                    <p><strong>–û–±–Ω–æ–≤–ª–µ–Ω:</strong> {{ post.updated_at|date:"d.m.Y H:i" }}</p>
                    <p><strong>–ì–æ–ª–æ—Å–æ–≤:</strong> {{ post.score }}</p>
                    {% if post.community %}
                    <p><strong>–°–æ–æ–±—â–µ—Å—Ç–≤–æ:</strong> 
                        <a href="{% url 'communities:community_detail' post.community.name %}">r/{{ post.community.name }}</a>
                    </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}